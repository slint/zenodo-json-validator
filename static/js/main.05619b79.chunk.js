(this["webpackJsonpzenodo-json-validator"]=this["webpackJsonpzenodo-json-validator"]||[]).push([[0],{32:function(e,t,n){e.exports=n(80)},37:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(19),i=n.n(r),c=(n(37),n(7)),s=n.n(c),u=n(20),l=n(8),p=n(29),h=n(30),d=n(21),m=n(22),f=n(31),g=n(28),v=n(23),b=n.n(v),j=n(24),y=n(3),E=n.n(y),w=(n(75),n(25)),x=n.n(w),O=(n(76),n(78),n(26)),k=n(27),_=new b.a({schemaId:"id",verbose:!0});_.addMetaSchema(O);var z={title:"Software title v1",creators:[{name:"Alex"}]},I=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"createEditor",value:function(e){var t=e.value,n=e.text,o=Object(h.a)(e,["value","text"]);this.jsonEditor&&this.jsonEditor.destroy(),this.jsonEditor=new E.a(this.htmlElementRef,Object(p.a)({onChange:this.handleChange},o)),t?this.jsonEditor.set(t):n&&this.jsonEditor.setText(n)}}]),n}(j.a);function C(e){return"object"===typeof e&&null!==e}function S(e){var t=e.schema,n=e.metadata,o=e.onChange;return a.a.createElement(a.a.Fragment,null,a.a.createElement(I,{value:C(n)?n:null,text:C(n)?null:n,onChange:o,allowedModes:["tree","code","form"],ajv:_,schema:t,ace:x.a,mode:"code",onValidate:function(e){var t,o=Object(k.diff)(n,e),a=[];return o&&o.license&&a.push((t=e.license,new Promise((function(e,n){fetch("https://sandbox.zenodo.org/api/licenses/".concat(t)).then((function(t){return e(t.ok)})).catch((function(e){return n(e)}))}))).then((function(t){return t?null:{path:["license"],message:"Invalid license ".concat(e.license,".")}}))),o&&o.grants&&e.grants.forEach((function(e,t){e.id&&a.push(function(e){return new Promise((function(t,n){var o=null;o=/^\d+$/.test(e)?"https://sandbox.zenodo.org/api/grants/10.13039/501100000780::".concat(e):"https://sandbox.zenodo.org/api/grants/".concat(e),fetch(o).then((function(e){return t(e.ok)})).catch((function(e){return n(e)}))}))}(e.id).then((function(n){return n?null:{path:["grants",t,"id"],message:"Invalid grant ID ".concat(e.id,".")}})))})),o&&o.communities&&e.communities.forEach((function(e,t){var n=e.identifier;n&&a.push(function(e){return new Promise((function(t,n){fetch("https://sandbox.zenodo.org/api/communities/".concat(e)).then((function(e){return t(e.ok)})).catch((function(e){return n(e)}))}))}(n).then((function(e){return e?null:{path:["communities",t,"identifier"],message:"Invalid community ID ".concat(n,".")}})))})),Promise.all(a).then((function(e){return e.filter((function(e){return null!=e}))}))}}))}var P=function(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(null),c=Object(l.a)(i,2),p=c[0],h=c[1];return Object(o.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://sandbox.zenodo.org/api/schemas/deposits/records/legacyrecord.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r(((o=n).properties.upload_type.enum=o.properties.upload_type.type.enum,o.properties.upload_type.type="string",o.properties.publication_type.enum=o.properties.publication_type.type.enum,o.properties.publication_type.type="string",o.properties.image_type.enum=o.properties.image_type.type.enum,o.properties.image_type.type="string",o));case 7:case"end":return e.stop()}var o}),e)})));return function(){return e.apply(this,arguments)}}();h(z),e()}),[]),a.a.createElement(a.a.Fragment,null,n&&p?a.a.createElement(S,{schema:n,metadata:p,onChange:function(e){}}):a.a.createElement("p",null,"Loading schema..."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.05619b79.chunk.js.map